#if 0
srce=${1%.c}
test -z "$srce" && exit 1
prog=${srce%/*}/../build/${srce##*/}.exe
base=${srce%/*}/in/${srce##*/}

cflags='-g -O0'
doexec=
case $2 in
  cover)  cflags="--coverage $cflags";&
  check)  bla() { diff -u $1 -; };;
  update) bla() { cat >$1; };;
  *)      shift; doexec=1;;
esac

set -exo pipefail
cc $cflags $srce.c -o $prog

test -n "$doexec" && exec $prog "$@"

for tape in $base/*.tape #*/
  do $prog ${tape%.tape} 2>&1| bla $tape
done

exit
#endif

#define TRY_EXITF
//#define LOC_NOTIF
#include "../cintre/prints.h"

void run_test(char* file);
int main(int argc, char** argv) { run_test(1 < argc ? argv[1] : ""); }
